import { Box, Typography } from '@mui/material';
import { useTheme } from '@mui/material/styles';

import { useFormatter } from '../../../../components/i18n';
import Loader from '../../../../components/Loader';
import { type VulnerabilityOutput } from '../../../../utils/api-types';
import { type VulnerabilityStatus } from './VulnerabilityDetail';

interface CveTabPanelProps {
  status: VulnerabilityStatus;
  vulnerability: VulnerabilityOutput | null;
  children: React.ReactNode;
}

const VulnerabilityTabPanel = ({ status, vulnerability, children }: CveTabPanelProps) => {
  const theme = useTheme();
  const { t } = useFormatter();

  switch (status) {
    case 'loading':
      return <Loader />;
    case 'notAvailable':
      return (
        <Box padding={theme.spacing(2, 1, 0, 0)}>
          <Typography variant="body2" gutterBottom>
            {t('There is no information about this vulnerability yet.')}
          </Typography>
        </Box>
      );
    case 'loaded':
      return vulnerability ? <>{children}</> : null;
    default:
      return null;
  }
};

export default VulnerabilityTabPanel;
